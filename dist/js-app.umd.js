(function(f,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(f=typeof globalThis<"u"?globalThis:f||self,c(f.JsApp={}))})(this,function(f){"use strict";const c=new WeakMap,b=new WeakMap,d=new WeakMap,S=Symbol("anyProducer"),U=Promise.resolve(),$=Symbol("listenerAdded"),C=Symbol("listenerRemoved");let O=!1,L=!1;const T=t=>typeof t=="string"||typeof t=="symbol"||typeof t=="number";function y(t){if(!T(t))throw new TypeError("`eventName` must be a string, symbol, or number")}function j(t){if(typeof t!="function")throw new TypeError("listener must be a function")}function g(t,e){const r=b.get(t);if(r.has(e))return r.get(e)}function E(t,e){const r=T(e)?e:S,n=d.get(t);if(n.has(r))return n.get(r)}function Ae(t,e,r){const n=d.get(t);if(n.has(e))for(const o of n.get(e))o.enqueue(r);if(n.has(S)){const o=Promise.all([e,r]);for(const s of n.get(S))s.enqueue(o)}}function k(t,e){e=Array.isArray(e)?e:[e];let r=!1,n=()=>{},o=[];const s={enqueue(u){o.push(u),n()},finish(){r=!0,n()}};for(const u of e){let i=E(t,u);i||(i=new Set,d.get(t).set(u,i)),i.add(s)}return{async next(){return o?o.length===0?r?(o=void 0,this.next()):(await new Promise(u=>{n=u}),this.next()):{done:!1,value:await o.shift()}:{done:!0}},async return(u){o=void 0;for(const i of e){const A=E(t,i);A&&(A.delete(s),A.size===0&&d.get(t).delete(i))}return n(),arguments.length>0?{done:!0,value:await u}:{done:!0}},[Symbol.asyncIterator](){return this}}}function D(t){if(t===void 0)return G;if(!Array.isArray(t))throw new TypeError("`methodNames` must be an array of strings");for(const e of t)if(!G.includes(e))throw typeof e!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${e} is not Emittery method`);return t}const h=t=>t===$||t===C;function v(t,e,r){if(h(e))try{O=!0,t.emit(e,r)}finally{O=!1}}class p{static mixin(e,r){return r=D(r),n=>{if(typeof n!="function")throw new TypeError("`target` must be function");for(const u of r)if(n.prototype[u]!==void 0)throw new Error(`The property \`${u}\` already exists on \`target\``);function o(){return Object.defineProperty(this,e,{enumerable:!1,value:new p}),this[e]}Object.defineProperty(n.prototype,e,{enumerable:!1,get:o});const s=u=>function(...i){return this[e][u](...i)};for(const u of r)Object.defineProperty(n.prototype,u,{enumerable:!1,value:s(u)});return n}}static get isDebugEnabled(){var r;if(typeof((r=globalThis.process)==null?void 0:r.env)!="object")return L;const{env:e}=globalThis.process??{env:{}};return e.DEBUG==="emittery"||e.DEBUG==="*"||L}static set isDebugEnabled(e){L=e}constructor(e={}){c.set(this,new Set),b.set(this,new Map),d.set(this,new Map),d.get(this).set(S,new Set),this.debug=e.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(r,n,o,s)=>{try{s=JSON.stringify(s)}catch{s=`Object with the following keys failed to stringify: ${Object.keys(s).join(",")}`}(typeof o=="symbol"||typeof o=="number")&&(o=o.toString());const u=new Date,i=`${u.getHours()}:${u.getMinutes()}:${u.getSeconds()}.${u.getMilliseconds()}`;console.log(`[${i}][emittery:${r}][${n}] Event Name: ${o}
	data: ${s}`)})}logIfDebugEnabled(e,r,n){(p.isDebugEnabled||this.debug.enabled)&&this.debug.logger(e,this.debug.name,r,n)}on(e,r,{signal:n}={}){j(r),e=Array.isArray(e)?e:[e];for(const s of e){y(s);let u=g(this,s);u||(u=new Set,b.get(this).set(s,u)),u.add(r),this.logIfDebugEnabled("subscribe",s,void 0),h(s)||v(this,$,{eventName:s,listener:r})}const o=()=>{this.off(e,r),n==null||n.removeEventListener("abort",o)};return n==null||n.addEventListener("abort",o,{once:!0}),n!=null&&n.aborted&&o(),o}off(e,r){j(r),e=Array.isArray(e)?e:[e];for(const n of e){y(n);const o=g(this,n);o&&(o.delete(r),o.size===0&&b.get(this).delete(n)),this.logIfDebugEnabled("unsubscribe",n,void 0),h(n)||v(this,C,{eventName:n,listener:r})}}once(e){let r;const n=new Promise(o=>{r=this.on(e,s=>{r(),o(s)})});return n.off=r,n}events(e){e=Array.isArray(e)?e:[e];for(const r of e)y(r);return k(this,e)}async emit(e,r){if(y(e),h(e)&&!O)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",e,r),Ae(this,e,r);const n=g(this,e)??new Set,o=c.get(this),s=[...n],u=h(e)?[]:[...o];await U,await Promise.all([...s.map(async i=>{if(n.has(i))return i(r)}),...u.map(async i=>{if(o.has(i))return i(e,r)})])}async emitSerial(e,r){if(y(e),h(e)&&!O)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",e,r);const n=g(this,e)??new Set,o=c.get(this),s=[...n],u=[...o];await U;for(const i of s)n.has(i)&&await i(r);for(const i of u)o.has(i)&&await i(e,r)}onAny(e,{signal:r}={}){j(e),this.logIfDebugEnabled("subscribeAny",void 0,void 0),c.get(this).add(e),v(this,$,{listener:e});const n=()=>{this.offAny(e),r==null||r.removeEventListener("abort",n)};return r==null||r.addEventListener("abort",n,{once:!0}),r!=null&&r.aborted&&n(),n}anyEvent(){return k(this)}offAny(e){j(e),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),v(this,C,{listener:e}),c.get(this).delete(e)}clearListeners(e){e=Array.isArray(e)?e:[e];for(const r of e)if(this.logIfDebugEnabled("clear",r,void 0),T(r)){const n=g(this,r);n&&n.clear();const o=E(this,r);if(o){for(const s of o)s.finish();o.clear()}}else{c.get(this).clear();for(const[n,o]of b.get(this).entries())o.clear(),b.get(this).delete(n);for(const[n,o]of d.get(this).entries()){for(const s of o)s.finish();o.clear(),d.get(this).delete(n)}}}listenerCount(e){var n,o,s;e=Array.isArray(e)?e:[e];let r=0;for(const u of e){if(T(u)){r+=c.get(this).size+(((n=g(this,u))==null?void 0:n.size)??0)+(((o=E(this,u))==null?void 0:o.size)??0)+(((s=E(this))==null?void 0:s.size)??0);continue}u!==void 0&&y(u),r+=c.get(this).size;for(const i of b.get(this).values())r+=i.size;for(const i of d.get(this).values())r+=i.size}return r}bindMethods(e,r){if(typeof e!="object"||e===null)throw new TypeError("`target` must be an object");r=D(r);for(const n of r){if(e[n]!==void 0)throw new Error(`The property \`${n}\` already exists on \`target\``);Object.defineProperty(e,n,{enumerable:!1,value:this[n].bind(this)})}}}const G=Object.getOwnPropertyNames(p.prototype).filter(t=>t!=="constructor");Object.defineProperty(p,"listenerAdded",{value:$,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(p,"listenerRemoved",{value:C,writable:!1,enumerable:!0,configurable:!1});function W(t){const e=new p(t);return{on:e.on.bind(e),off:e.off.bind(e),emit:e.emit.bind(e),once:e.once.bind(e),events:e.events.bind(e),emitSerial:e.emitSerial.bind(e),onAny:e.onAny.bind(e),offAny:e.offAny.bind(e),anyEvent:e.anyEvent.bind(e),clearListeners:e.clearListeners.bind(e),listenerCount:e.listenerCount.bind(e),bindMethods:e.bindMethods.bind(e)}}let we=0;function Ee(t=""){return`${t}${++we}`}async function Z(t){const e=Array.from(a.registry.values()).filter(({selector:n})=>!!t.querySelector(n)),r=e.filter(({asyncComponent:n,component:o})=>!o&&!!n);await Promise.all(r.map(n=>{var o;return(o=n.asyncComponent)==null?void 0:o.call(n).then(s=>{n.component=s})}));for(const n of e)t.querySelectorAll(n.selector).forEach(o=>{var i;if(o.hasAttribute(`[data-component-name="${n.name}"]`))return;const s=((i=n.component)==null?void 0:i.call(n,o,n.props??{}))??{},u=Ee(`component-${n.name}-`);o.setAttribute("data-component-id",u),o.setAttribute("data-component-name",n.name),a.components.set(u,{id:u,selector:n.selector,name:n.name,ref:s})})}function Re(){const t=new Map,e=new Map;return{...W(),registry:t,components:e,isReady:!1}}const a=Re();async function Se(t){if(a.isReady){console.warn("App is already initialized.");return}await Z(t),await a.emit("ready"),a.isReady=!0}function $e(t,e,r,n){return{component:r,props:n??{},selector:e,asyncComponent:void 0,name:t}}function Ce(t,e,r,n){return{component:void 0,props:n??{},selector:e,asyncComponent:r,name:t}}function Oe(t){if(Object.isFrozen(a.registry)){console.warn("Cannot add to read-only registry.");return}(Array.isArray(t)?t:[t]).forEach(r=>{a.registry.set(r.name+":"+r.selector,r)})}function Te(t){var r,n;if(!a.isReady){console.warn("App is not initialized yet.");return}const e=Array.from(t.querySelectorAll("[data-component-id]"));t.hasAttribute("data-component-id")&&e.push(t);for(const o of e){const s=o.dataset.componentId,u=a.components.get(s);u&&((n=(r=u.ref).destroy)==null||n.call(r),a.components.delete(s)),o.removeAttribute("data-component-id"),o.removeAttribute("data-component-name")}}var je=typeof global=="object"&&global&&global.Object===Object&&global,ve=typeof self=="object"&&self&&self.Object===Object&&self,Me=je||ve||Function("return this")(),m=Me.Symbol,q=Object.prototype,Le=q.hasOwnProperty,Pe=q.toString,R=m?m.toStringTag:void 0;function ze(t){var e=Le.call(t,R),r=t[R];try{t[R]=void 0;var n=!0}catch{}var o=Pe.call(t);return n&&(e?t[R]=r:delete t[R]),o}var Ie=Object.prototype,Ue=Ie.toString;function ke(t){return Ue.call(t)}var De="[object Null]",Ge="[object Undefined]",H=m?m.toStringTag:void 0;function We(t){return t==null?t===void 0?Ge:De:H&&H in Object(t)?ze(t):ke(t)}function Ze(t){return t!=null&&typeof t=="object"}var qe="[object Symbol]";function He(t){return typeof t=="symbol"||Ze(t)&&We(t)==qe}function Je(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var Fe=Array.isArray,J=m?m.prototype:void 0,F=J?J.toString:void 0;function B(t){if(typeof t=="string")return t;if(Fe(t))return Je(t,B)+"";if(He(t))return F?F.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function M(t){return t==null?"":B(t)}function Be(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(o);++n<o;)s[n]=t[n+e];return s}function Ve(t,e,r){var n=t.length;return r=r===void 0?n:r,Be(t,e,r)}var _e="\\ud800-\\udfff",Ye="\\u0300-\\u036f",Ke="\\ufe20-\\ufe2f",Qe="\\u20d0-\\u20ff",Xe=Ye+Ke+Qe,Ne="\\ufe0e\\ufe0f",et="\\u200d",tt=RegExp("["+et+_e+Xe+Ne+"]");function V(t){return tt.test(t)}function rt(t){return t.split("")}var _="\\ud800-\\udfff",nt="\\u0300-\\u036f",ot="\\ufe20-\\ufe2f",ut="\\u20d0-\\u20ff",st=nt+ot+ut,it="\\ufe0e\\ufe0f",ft="["+_+"]",P="["+st+"]",z="\\ud83c[\\udffb-\\udfff]",at="(?:"+P+"|"+z+")",Y="[^"+_+"]",K="(?:\\ud83c[\\udde6-\\uddff]){2}",Q="[\\ud800-\\udbff][\\udc00-\\udfff]",ct="\\u200d",X=at+"?",N="["+it+"]?",dt="(?:"+ct+"(?:"+[Y,K,Q].join("|")+")"+N+X+")*",lt=N+X+dt,bt="(?:"+[Y+P+"?",P,K,Q,ft].join("|")+")",pt=RegExp(z+"(?="+z+")|"+bt+lt,"g");function yt(t){return t.match(pt)||[]}function gt(t){return V(t)?yt(t):rt(t)}function ht(t){return function(e){e=M(e);var r=V(e)?gt(e):void 0,n=r?r[0]:e.charAt(0),o=r?Ve(r,1).join(""):e.slice(1);return n[t]()+o}}var mt=ht("toUpperCase");function xt(t){return mt(M(t).toLowerCase())}function At(t,e,r,n){for(var o=-1,s=t==null?0:t.length;++o<s;)r=e(r,t[o],o,t);return r}function wt(t){return function(e){return t==null?void 0:t[e]}}var Et={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Rt=wt(Et),St=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t="\\u0300-\\u036f",Ct="\\ufe20-\\ufe2f",Ot="\\u20d0-\\u20ff",Tt=$t+Ct+Ot,jt="["+Tt+"]",vt=RegExp(jt,"g");function Mt(t){return t=M(t),t&&t.replace(St,Rt).replace(vt,"")}var Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Pt(t){return t.match(Lt)||[]}var zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function It(t){return zt.test(t)}var ee="\\ud800-\\udfff",Ut="\\u0300-\\u036f",kt="\\ufe20-\\ufe2f",Dt="\\u20d0-\\u20ff",Gt=Ut+kt+Dt,te="\\u2700-\\u27bf",re="a-z\\xdf-\\xf6\\xf8-\\xff",Wt="\\xac\\xb1\\xd7\\xf7",Zt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qt="\\u2000-\\u206f",Ht=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ne="A-Z\\xc0-\\xd6\\xd8-\\xde",Jt="\\ufe0e\\ufe0f",oe=Wt+Zt+qt+Ht,ue="['’]",se="["+oe+"]",Ft="["+Gt+"]",ie="\\d+",Bt="["+te+"]",fe="["+re+"]",ae="[^"+ee+oe+ie+te+re+ne+"]",Vt="\\ud83c[\\udffb-\\udfff]",_t="(?:"+Ft+"|"+Vt+")",Yt="[^"+ee+"]",ce="(?:\\ud83c[\\udde6-\\uddff]){2}",de="[\\ud800-\\udbff][\\udc00-\\udfff]",x="["+ne+"]",Kt="\\u200d",le="(?:"+fe+"|"+ae+")",Qt="(?:"+x+"|"+ae+")",be="(?:"+ue+"(?:d|ll|m|re|s|t|ve))?",pe="(?:"+ue+"(?:D|LL|M|RE|S|T|VE))?",ye=_t+"?",ge="["+Jt+"]?",Xt="(?:"+Kt+"(?:"+[Yt,ce,de].join("|")+")"+ge+ye+")*",Nt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",er="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tr=ge+ye+Xt,rr="(?:"+[Bt,ce,de].join("|")+")"+tr,nr=RegExp([x+"?"+fe+"+"+be+"(?="+[se,x,"$"].join("|")+")",Qt+"+"+pe+"(?="+[se,x+le,"$"].join("|")+")",x+"?"+le+"+"+be,x+"+"+pe,er,Nt,ie,rr].join("|"),"g");function or(t){return t.match(nr)||[]}function ur(t,e,r){return t=M(t),e=e,e===void 0?It(t)?or(t):Pt(t):t.match(e)||[]}var sr="['’]",ir=RegExp(sr,"g");function he(t){return function(e){return At(ur(Mt(e).replace(ir,"")),t,"")}}var fr=he(function(t,e,r){return e=e.toLowerCase(),t+(r?xt(e):e)}),I=he(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()});function ar(t,e,r={}){const n=I(e),o=e.split("-").length,s=Object.keys(t.dataset).reduce((u,i)=>{const A=I(i).split("-").slice(0,o).join("-"),l=t.dataset[i];if(typeof l>"u"||A!==n)return u;const w=fr(I(i).split("-").slice(o).join("-"));if(!w)return u;try{u[w]=JSON.parse(l)}catch{if(l===""||l==="true")u[w]=!0;else if(l==="false")u[w]=!1;else{const xe=parseFloat(l);xe+""===l?u[w]=xe:u[w]=l}}return u},{});return{...r,...s}}function me(t){if(a.isReady){t();return}a.once("ready").then(()=>{t()})}function cr(t,e){const r={current:null};return me(()=>{var s;if(!(t.dataset.componentName===e))return null;const o=t.dataset.componentId;r.current=((s=a.components.get(o))==null?void 0:s.ref)??null}),r}f.App=a,f.addToRegistry=Oe,f.destroyComponents=Te,f.initApp=Se,f.initComponents=Z,f.registerAsyncComponent=Ce,f.registerComponent=$e,f.useEmitter=W,f.useGetProps=ar,f.useGetRef=cr,f.useReady=me,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
